<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8" />
    <title>เสกของใน Roblox</title>
</head>
<body>
    <h1>หน้าเสกของใน Roblox</h1>
    
    <label for="playerName">ชื่่อผู้เล่น Roblox:</label>
    <input type="text" id="playerName" placeholder="เช่น Player123" />

    <label for="itemName">ชื่อไอเท็มที่จะเสก:</label>
    <input type="text" id="itemName" placeholder="เช่น Sword" />

    <button id="spawnButton">เสกของ</button>

    <p id="result"></p>

    <script>
        const spawnButton = document.getElementById('spawnButton');
        const result = document.getElementById('result');

        spawnButton.addEventListener('click', async () => {
            const playerName = document.getElementById('playerName').value.trim();
            const itemName = document.getElementById('itemName').value.trim();

            if (!playerName || !itemName) {
                result.textContent = "กรุณากรอกข้อมูลให้ครบ";
                return;
            }

            try {
                // ✅ แก้ URL API ให้ถูกต้องตาม Netlify
                const response = await fetch('/.netlify/functions/spawn-item', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ playerName, itemName })
                });

                const data = await response.json();

                if (response.ok) {
                    result.textContent = `✅ เสกของสำเร็จ: ${data.message}`;
                } else {
                    result.textContent = `❌ เกิดข้อผิดพลาด: ${data.error}`;
                }
            } catch (err) {
                result.textContent = '❌ ไม่สามารถเชื่อมต่อ API ได้';
                console.error(err);
            }
        });
    </script>
</body>
</html>
